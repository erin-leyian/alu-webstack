#!/usr/bin/env bash
# Script audits DNS for domain + subdomains

domain="$1"
sub="$2"

audit() {
    local full="${1}.${domain}"

    # Run nslookup and extract DNS record
    local record
    record=$(nslookup "$full" 8.8.8.8 | awk '/Address:/ {print $2}' | tail -n1)

    echo "The subdomain $1 is a A record and points to $record"
}

# If only domain provided â†’ audit all 4 in order
if [ -z "$sub" ]; then
    audit "www"
    audit "lb-01"
    audit "web-01"
    audit "web-02"
else
    audit "$sub"
fi

